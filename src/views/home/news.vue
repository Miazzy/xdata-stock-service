<template>
<div class="home">
    <div>
        <div class="home-newslist">
            <div class="home-middle-content">
                <div class="lnews-cell" data-news_id="9c368015690606801080b381e460f482" data-feed_id="300576340" data-keywords="" data-tag=""> <a class="item" href="https://mob.qichacha.com/h5/app/news-template/index-dynamics?newsId=9c368015690606801080b381e460f482&amp;outside=1&amp;unique=8cc160268ee08b0b305b3691e842c10e" target="_blank" rel="nofollow">
                        <div class="cell-bd">
                            <div class="content">
                                <div class="title fixheight">
                                    美国将涉嫌协助日产前董事长戈恩潜逃的2名美国人引渡至日本
                                </div>
                                <div class="info"> <span class="ltext">第一财经</span> <span class="ltext">3347阅读</span> <span class="ltext">2小时前</span> </div>
                            </div>
                        </div>
                        <div class="cell-ft">
                            <div class="img"> <img src="https://qcc-media-img.qichacha.com/MediaSentimentImage/9c368015690606801080b381e460f4820.jpg" alt="美国将涉嫌协助日产前董事长戈恩潜逃的2名美国人引渡至日本-企查查" onerror="this.src='/material/theme/chacha/cms/v2/images/no_image.png'" class=""> </div>
                        </div>
                    </a> </div>
                <div class="lnews-cell" data-news_id="9bb367b0f6bea0f6914e6b40a810c1ae" data-feed_id="300578500" data-keywords="" data-tag=""> <a class="item" href="https://mob.qichacha.com/h5/app/news-template/index-dynamics?newsId=9bb367b0f6bea0f6914e6b40a810c1ae&amp;outside=1&amp;unique=1fdd7be2ade0dc92468c6f36d390ba30" target="_blank" rel="nofollow">
                        <div class="cell-bd">
                            <div class="content">
                                <div class="title fixheight">
                                    法国二手奢侈品平台完成新一轮共1.78亿欧元融资
                                </div>
                                <div class="info"> <span class="ltext">搜狐财经</span> <span class="ltext">958阅读</span> <span class="ltext">1小时前</span> </div>
                            </div>
                        </div>
                    </a> </div>
                <div class="lnews-cell" data-news_id="d312bfc9cb2cd601fdbc5af10d1309f7" data-feed_id="300563882" data-keywords="" data-tag=""> <a class="item" href="https://mob.qichacha.com/h5/app/news-template/index-dynamics?newsId=d312bfc9cb2cd601fdbc5af10d1309f7&amp;outside=1&amp;unique=1fdd7be2ade0dc92468c6f36d390ba30" target="_blank" rel="nofollow">
                        <div class="cell-bd">
                            <div class="content">
                                <div class="title fixheight">
                                    海底捞2020年净利润下降九成
                                </div>
                                <div class="info"> <span class="ltext">搜狐财经</span> <span class="ltext">1467阅读</span> <span class="ltext">3小时前</span> </div>
                            </div>
                        </div>
                    </a> </div>
                <div class="lnews-cell" data-news_id="1f9f0c0dc2ee8972e2c4603a453dd91d" data-feed_id="300548741" data-keywords="" data-tag=""> <a class="item" href="https://mob.qichacha.com/h5/app/news-template/index-dynamics?newsId=1f9f0c0dc2ee8972e2c4603a453dd91d&amp;outside=1&amp;unique=6c4e441e3c1e5358002160302de49d38" target="_blank" rel="nofollow">
                        <div class="cell-bd">
                            <div class="content">
                                <div class="title fixheight">
                                    辉瑞CEO：未来人们需要每年都去接种新冠疫苗以获得保护
                                </div>
                                <div class="info"> <span class="ltext">Techweb</span> <span class="ltext">9324阅读</span> <span class="ltext">4小时前</span> </div>
                            </div>
                        </div>
                    </a> </div>
                <div class="lnews-cell" data-news_id="89a7e1074d392bf4d7f7458041611a03" data-feed_id="300562655" data-keywords="" data-tag=""> <a class="item" href="https://mob.qichacha.com/h5/app/news-template/index-dynamics?newsId=89a7e1074d392bf4d7f7458041611a03&amp;outside=1&amp;unique=1fdd7be2ade0dc92468c6f36d390ba30" target="_blank" rel="nofollow">
                        <div class="cell-bd">
                            <div class="content">
                                <div class="title fixheight">
                                    家居周十条|原材料“涨价潮”持续中、宜华生活股票停牌、王力安防上市…
                                </div>
                                <div class="info"> <span class="ltext">搜狐财经</span> <span class="ltext">1307阅读</span> <span class="ltext">3小时前</span> </div>
                            </div>
                        </div>
                    </a> </div>
                <div class="lnews-cell" data-news_id="5e5734d946189566c8bfd4d0195ea028" data-feed_id="300552572" data-keywords="" data-tag=""> <a class="item" href="https://mob.qichacha.com/h5/app/news-template/index-dynamics?newsId=5e5734d946189566c8bfd4d0195ea028&amp;outside=1&amp;unique=66ce44c5c01d8a96962b9be88bbc9b1" target="_blank" rel="nofollow">
                        <div class="cell-bd">
                            <div class="content">
                                <div class="title fixheight">
                                    市场要闻 | 百度完成 1:80 拆股计划，市值重回千亿美元，回港上市更进一步？
                                </div>
                                <div class="info"> <span class="ltext">36氪</span> <span class="ltext">6705阅读</span> <span class="ltext">3小时前</span> </div>
                            </div>
                        </div>
                        <div class="cell-ft">
                            <div class="img"> <img src="https://qcc-media-img.qichacha.com/MediaSentimentImage/5e5734d946189566c8bfd4d0195ea0280.jpg" alt="市场要闻 | 百度完成 1:80 拆股计划，市值重回千亿美元，回港上市更进一步？-企查查" onerror="this.src='/material/theme/chacha/cms/v2/images/no_image.png'" class=""> </div>
                        </div>
                    </a> </div>
                <div class="lnews-cell" data-news_id="9597a9485240ac36924f0c0e51aa5ef1" data-feed_id="300562063" data-keywords="" data-tag=""> <a class="item" href="https://mob.qichacha.com/h5/app/news-template/index-dynamics?newsId=9597a9485240ac36924f0c0e51aa5ef1&amp;outside=1&amp;unique=6c4e441e3c1e5358002160302de49d38" target="_blank" rel="nofollow">
                        <div class="cell-bd">
                            <div class="content">
                                <div class="title fixheight">
                                    iPhone 11不死：苹果至少2022年停产 继续降价销售
                                </div>
                                <div class="info"> <span class="ltext">Techweb</span> <span class="ltext">5224阅读</span> <span class="ltext">3小时前</span> </div>
                            </div>
                        </div>
                    </a> </div>
                <div class="lnews-cell" data-news_id="29f96229aca69c0702f8a0e37467610d" data-feed_id="300560540" data-keywords="" data-tag=""> <a class="item" href="https://mob.qichacha.com/h5/app/news-template/index-dynamics?newsId=29f96229aca69c0702f8a0e37467610d&amp;outside=1&amp;unique=1fdd7be2ade0dc92468c6f36d390ba30" target="_blank" rel="nofollow">
                        <div class="cell-bd">
                            <div class="content">
                                <div class="title fixheight">
                                    数据分析平台“Stratifyd”完成数千万美元B轮融资
                                </div>
                                <div class="info"> <span class="ltext">搜狐财经</span> <span class="ltext">1566阅读</span> <span class="ltext">3小时前</span> </div>
                            </div>
                        </div>
                        <div class="cell-ft">
                            <div class="img"> <img src="https://qcc-media-img.qichacha.com/MediaSentimentImage/29f96229aca69c0702f8a0e37467610d0.jpg" alt="数据分析平台“Stratifyd”完成数千万美元B轮融资 -企查查" onerror="this.src='/material/theme/chacha/cms/v2/images/no_image.png'" class=""> </div>
                        </div>
                    </a> </div>
                <div class="lnews-cell" data-news_id="bf43529dd6666175fa3478ba2695c937" data-feed_id="300576145" data-keywords="" data-tag=""> <a class="item" href="https://mob.qichacha.com/h5/app/news-template/index-dynamics?newsId=bf43529dd6666175fa3478ba2695c937&amp;outside=1&amp;unique=8cc160268ee08b0b305b3691e842c10e" target="_blank" rel="nofollow">
                        <div class="cell-bd">
                            <div class="content">
                                <div class="title fixheight">
                                    黑龙江绥化市望奎县继续实施分级管控
                                </div>
                                <div class="info"> <span class="ltext">第一财经</span> <span class="ltext">3501阅读</span> <span class="ltext">2小时前</span> </div>
                            </div>
                        </div>
                        <div class="cell-ft">
                            <div class="img"> <img src="https://qcc-media-img.qichacha.com/MediaSentimentImage/bf43529dd6666175fa3478ba2695c9370.jpg" alt="黑龙江绥化市望奎县继续实施分级管控-企查查" onerror="this.src='/material/theme/chacha/cms/v2/images/no_image.png'" class=""> </div>
                        </div>
                    </a> </div>
                <div class="lnews-cell" data-news_id="01a34aa35c0ae01b737e121e5efa2485" data-feed_id="300547902" data-keywords="" data-tag=""> <a class="item" href="https://mob.qichacha.com/h5/app/news-template/index-dynamics?newsId=01a34aa35c0ae01b737e121e5efa2485&amp;outside=1&amp;unique=1fdd7be2ade0dc92468c6f36d390ba30" target="_blank" rel="nofollow">
                        <div class="cell-bd">
                            <div class="content">
                                <div class="title fixheight">
                                    中南建设担保额超过净资产3倍，实控人半数持股质押
                                </div>
                                <div class="info"> <span class="ltext">搜狐财经</span> <span class="ltext">9948阅读</span> <span class="ltext">4小时前</span> </div>
                            </div>
                        </div>
                    </a> </div>
                <div class="lnews-cell" data-news_id="1317c35e5f30190365f324ac0edafa79" data-feed_id="300551985" data-keywords="" data-tag=""> <a class="item" href="https://mob.qichacha.com/h5/app/news-template/index-dynamics?newsId=1317c35e5f30190365f324ac0edafa79&amp;outside=1&amp;unique=e7d4d828d45f3a5f695e412b69e4777c" target="_blank" rel="nofollow">
                        <div class="cell-bd">
                            <div class="content">
                                <div class="title fixheight">
                                    诗云科技获数百万美元天使轮融资，红杉中国、真格基金联合投资
                                </div>
                                <div class="info"> <span class="ltext">投资界</span> <span class="ltext">2000阅读</span> <span class="ltext">3小时前</span> </div>
                            </div>
                        </div>
                    </a> </div>
                <div class="lnews-cell" data-news_id="57d65e521d10d375d2b6f4c41d020d0d" data-feed_id="300548261" data-keywords="" data-tag=""> <a class="item" href="https://mob.qichacha.com/h5/app/news-template/index-dynamics?newsId=57d65e521d10d375d2b6f4c41d020d0d&amp;outside=1&amp;unique=800f3454eebee3a3133b58ec16b76e0f" target="_blank" rel="nofollow">
                        <div class="cell-bd">
                            <div class="content">
                                <div class="title fixheight">
                                    货客蜂完成2500万美元A轮融资，凯辉创新基金领投
                                </div>
                                <div class="info"> <span class="ltext">猎云网</span> <span class="ltext">9580阅读</span> <span class="ltext">4小时前</span> </div>
                            </div>
                        </div>
                    </a> </div>
                <div class="lnews-cell" data-news_id="922d4ccba9aba47ec79e2d847684ed7e" data-feed_id="300546977" data-keywords="" data-tag=""> <a class="item" href="https://mob.qichacha.com/h5/app/news-template/index-dynamics?newsId=922d4ccba9aba47ec79e2d847684ed7e&amp;outside=1&amp;unique=44f6ead2a3d7e228b8141033dca9e017" target="_blank" rel="nofollow">
                        <div class="cell-bd">
                            <div class="content">
                                <div class="title fixheight">
                                    首发｜移动机器人公司“蓝芯科技”融资数千万 蓝驰创投领投
                                </div>
                                <div class="info"> <span class="ltext">铅笔道</span> <span class="ltext">1.04万阅读</span> <span class="ltext">4小时前</span> </div>
                            </div>
                        </div>
                        <div class="cell-ft">
                            <div class="img"> <img src="https://qcc-media-img.qichacha.com/MediaSentimentImage/922d4ccba9aba47ec79e2d847684ed7e0.jpg" alt="首发｜移动机器人公司“蓝芯科技”融资数千万 蓝驰创投领投-企查查" onerror="this.src='/material/theme/chacha/cms/v2/images/no_image.png'" class=""> </div>
                        </div>
                    </a> </div>
                <div class="lnews-cell" data-news_id="ce2d6377e54959fe0ed733024f8798fb" data-feed_id="300560109" data-keywords="" data-tag=""> <a class="item" href="https://mob.qichacha.com/h5/app/news-template/index-dynamics?newsId=ce2d6377e54959fe0ed733024f8798fb&amp;outside=1&amp;unique=e7d4d828d45f3a5f695e412b69e4777c" target="_blank" rel="nofollow">
                        <div class="cell-bd">
                            <div class="content">
                                <div class="title fixheight">
                                    惠永公司完成超2亿元A轮融资，上海生物医药基金领投
                                </div>
                                <div class="info"> <span class="ltext">投资界</span> <span class="ltext">5740阅读</span> <span class="ltext">3小时前</span> </div>
                            </div>
                        </div>
                    </a> </div>
                <div class="lnews-cell" data-news_id="bc0db699d460ea04a60d2540e6dfae31" data-feed_id="300560541" data-keywords="" data-tag=""> <a class="item" href="https://mob.qichacha.com/h5/app/news-template/index-dynamics?newsId=bc0db699d460ea04a60d2540e6dfae31&amp;outside=1&amp;unique=1fdd7be2ade0dc92468c6f36d390ba30" target="_blank" rel="nofollow">
                        <div class="cell-bd">
                            <div class="content">
                                <div class="title fixheight">
                                    港股IPO|赛生药业发售价定为18.80港元，公开发售获超千倍认购
                                </div>
                                <div class="info"> <span class="ltext">搜狐财经</span> <span class="ltext">1598阅读</span> <span class="ltext">3小时前</span> </div>
                            </div>
                        </div>
                    </a> </div>
                <div class="lnews-cell" data-news_id="d93a9ffc9eaa710b5d2fae0aff817e56" data-feed_id="300559797" data-keywords="" data-tag=""> <a class="item" href="https://mob.qichacha.com/h5/app/news-template/index-dynamics?newsId=d93a9ffc9eaa710b5d2fae0aff817e56&amp;outside=1&amp;unique=6c4e441e3c1e5358002160302de49d38" target="_blank" rel="nofollow">
                        <div class="cell-bd">
                            <div class="content">
                                <div class="title ">
                                    提升车辆安全性能！丰田无偿公开虚拟人体模型“THUMS”
                                </div>
                                <div class="images clearfix">
                                    <div class="img"> <img src="https://qcc-media-img.qichacha.com/MediaSentimentImage/d93a9ffc9eaa710b5d2fae0aff817e560.jpg" onerror="this.src='/material/theme/chacha/cms/v2/images/no_image.png'"> </div>
                                    <div class="img"> <img src="https://qcc-media-img.qichacha.com/MediaSentimentImage/d93a9ffc9eaa710b5d2fae0aff817e561.jpg" onerror="this.src='/material/theme/chacha/cms/v2/images/no_image.png'"> </div>
                                </div>
                                <div class="info"> <span class="ltext">Techweb</span> <span class="ltext">5800阅读</span> <span class="ltext">3小时前</span> </div>
                            </div>
                        </div>
                    </a> </div>
                <div class="lnews-cell" data-news_id="896275f1a33c1b2a034ca947ef3e8af1" data-feed_id="300579344" data-keywords="" data-tag=""> <a class="item" href="https://mob.qichacha.com/h5/app/news-template/index-dynamics?newsId=896275f1a33c1b2a034ca947ef3e8af1&amp;outside=1&amp;unique=74eaafe230b919ba40349d5108729862" target="_blank" rel="nofollow">
                        <div class="cell-bd">
                            <div class="content">
                                <div class="title fixheight">
                                    全国政协委员孙洁：长护险筹资渠道单一护理标准不统一，亟需监管出台具体规范
                                </div>
                                <div class="info"> <span class="ltext">华夏时报网</span> <span class="ltext">1899阅读</span> <span class="ltext">2小时前</span> </div>
                            </div>
                        </div>
                        <div class="cell-ft">
                            <div class="img"> <img src="https://qcc-media-img.qichacha.com/MediaSentimentImage/896275f1a33c1b2a034ca947ef3e8af10.jpg" alt="全国政协委员孙洁：长护险筹资渠道单一护理标准不统一，亟需监管出台具体规范-企查查" onerror="this.src='/material/theme/chacha/cms/v2/images/no_image.png'" class=""> </div>
                        </div>
                    </a> </div>
                <div class="lnews-cell" data-news_id="8648fab9bc97ba8bad4775c704fea683" data-feed_id="300603313" data-keywords="" data-tag=""> <a class="item" href="https://mob.qichacha.com/h5/app/news-template/index-dynamics?newsId=8648fab9bc97ba8bad4775c704fea683&amp;outside=1&amp;unique=1fdd7be2ade0dc92468c6f36d390ba30" target="_blank" rel="nofollow">
                        <div class="cell-bd">
                            <div class="content">
                                <div class="title fixheight">
                                    原创 官宣！128位专家评委助力第十五届排排网私募奖项评选！
                                </div>
                                <div class="info"> <span class="ltext">搜狐财经</span> <span class="ltext">132阅读</span> <span class="ltext">33分钟前</span> </div>
                            </div>
                        </div>
                        <div class="cell-ft">
                            <div class="img"> <img src="https://qcc-media-img.qichacha.com/MediaSentimentImage/8648fab9bc97ba8bad4775c704fea6830.jpg" alt=" 原创 官宣！128位专家评委助力第十五届排排网私募奖项评选！ -企查查" onerror="this.src='/material/theme/chacha/cms/v2/images/no_image.png'" class=""> </div>
                        </div>
                    </a> </div>
                <div class="lnews-cell" data-news_id="fb12b6700f73861af4e8430a86ef6579" data-feed_id="300576822" data-keywords="" data-tag=""> <a class="item" href="https://mob.qichacha.com/h5/app/news-template/index-dynamics?newsId=fb12b6700f73861af4e8430a86ef6579&amp;outside=1&amp;unique=1fdd7be2ade0dc92468c6f36d390ba30" target="_blank" rel="nofollow">
                        <div class="cell-bd">
                            <div class="content">
                                <div class="title fixheight">
                                    平安银行落地股份行首单个人不良贷款债权批量转让业务
                                </div>
                                <div class="info"> <span class="ltext">搜狐财经</span> <span class="ltext">1124阅读</span> <span class="ltext">2小时前</span> </div>
                            </div>
                        </div>
                    </a> </div>
                <div class="lnews-cell" data-news_id="eeb2d93c4e1cc8cd97ae1ca1ce264042" data-feed_id="300560292" data-keywords="" data-tag=""> <a class="item" href="https://mob.qichacha.com/h5/app/news-template/index-dynamics?newsId=eeb2d93c4e1cc8cd97ae1ca1ce264042&amp;outside=1&amp;unique=1fdd7be2ade0dc92468c6f36d390ba30" target="_blank" rel="nofollow">
                        <div class="cell-bd">
                            <div class="content">
                                <div class="title ">
                                    原创 营收提升/储备充足，加大技术/服务投入，蔚来2020营收公布
                                </div>
                                <div class="images clearfix">
                                    <div class="img"> <img src="https://qcc-media-img.qichacha.com/MediaSentimentImage/eeb2d93c4e1cc8cd97ae1ca1ce2640420.jpg" onerror="this.src='/material/theme/chacha/cms/v2/images/no_image.png'"> </div>
                                    <div class="img"> <img src="https://qcc-media-img.qichacha.com/MediaSentimentImage/eeb2d93c4e1cc8cd97ae1ca1ce2640421.jpg" onerror="this.src='/material/theme/chacha/cms/v2/images/no_image.png'"> </div>
                                    <div class="img"> <img src="https://qcc-media-img.qichacha.com/MediaSentimentImage/eeb2d93c4e1cc8cd97ae1ca1ce2640422.jpg" onerror="this.src='/material/theme/chacha/cms/v2/images/no_image.png'"> </div>
                                </div>
                                <div class="info"> <span class="ltext">搜狐财经</span> <span class="ltext">1542阅读</span> <span class="ltext">3小时前</span> </div>
                            </div>
                        </div>
                    </a> </div>
            </div>
        </div>
        <div style="height:30px;"></div>
    </div>
    <tabbar></tabbar>
</div>
</template>

<script>
import {
    ref,
    reactive,
    onMounted,
    toRefs,
    getCurrentInstance
} from "vue";
import {
    useStore
} from "vuex";
import {
    useRouter,
    useRoute
} from "vue-router";
import tabbar from "@/components/tabbar";
export default {
    name: "home",
    components: {
        tabbar
    },
    setup(props, context) {
        const {
            ctx
        } = getCurrentInstance();
        const $store = useStore(); // ctx.$store === $store  ==>true 其实是同一个对象！
        const $router = useRouter();
        const $route = useRoute(); // 可以拿到所有和路由相关的参数
        const active = ref("");
        const timeData = ref(36000000);
        const headerActive = ref(false);

        const state = reactive({
            homeImgs: [],
            tabArray: []
        });

        const ball = reactive({
            show: false,
            el: ""
        });

        ctx.$http.get("http://test.happymmall.com/home/homeData").then(res => {
            const {
                images,
                tabList
            } = res.data;
            state.tabArray = tabList;
            state.homeImgs = images;
        });

        onMounted(() => {
            ctx.$eventBus.$emit("changeTag", 0);
            window.addEventListener("scroll", pageScroll);
        });

        const addToCart = (event, tag) => {
            $store.commit("cart/addToCart", tag);
            ball.show = true;
            ball.el = event.target;
        };

        const beforeEnter = el => {
            const dom = ball.el;
            const rect = dom.getBoundingClientRect();
            const x = rect.left - window.innerWidth * 0.6;
            const y = -(window.innerHeight - rect.top);
            el.style.display = "block";
            el.style.transform = `translate3d(0,${y}px,0)`;
            const inner = el.querySelector(".inner");
            inner.style.transform = `translate3d(${x}px,0,0)`;
        };

        const enter = (el, done) => {
            document.body.offsetHeight;
            el.style.transform = "translate3d(0,0,0)";
            const inner = el.querySelector(".inner");
            inner.style.transform = "translate3d(0,0,0)";
            el.addEventListener("transitionend", done);
        };

        const afterEnter = el => {
            ball.show = false;
            el.style.display = "none";
        };

        const handleClick = linkUrl => {
            $router.push("/classify/product");
        };

        const pageScroll = () => {
            const scrollTop =
                window.pageYOffset ||
                document.documentElement.scrollTop ||
                document.body.scrollTop;
            scrollTop > 100 ?
                (headerActive.value = true) :
                (headerActive.value = false);
        };

        return {
            active,
            timeData,
            headerActive,
            ...toRefs(ball),
            ...toRefs(state),
            addToCart,
            beforeEnter,
            enter,
            afterEnter,
            handleClick,
            pageScroll
        };
    }
};
</script>

<style lang="scss" scoped>
@import "./home.css";
@import "./news.scss";
</style>
